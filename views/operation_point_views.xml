<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Operation Point Form View -->
    <record id="view_operation_point_form" model="ir.ui.view">
        <field name="name">operation.point.form</field>
        <field name="model">operation.point</field>
        <field name="arch" type="xml">
            <form string="Operation Point">
                <header>
                    <field name="status" widget="statusbar" clickable="True"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Enter operation point name..."/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="point_type"/>
                             <field name="location_id"/>
                            <field name="address" placeholder="Enter full address..."/>
                            <field name="google_map_location" widget="url" placeholder="Paste Google Maps link..."/>
                            <field name="contract_duration" invisible="point_type != 'temporary_branch'"/>
                        </group>
                        <group>
                            <field name="responsible_employee_id" context="{'form_view_ref': 'hr.view_employee_form'}"/>
                            <field name="working_hours" placeholder="e.g., 08:00-17:00"/>
                            <field name="status"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Assigned Vehicles">
                            <field name="vehicle_ids">
                                <list>
                                    <field name="name"/>
                                    <field name="vehicle_status"/>
                                    <!-- Assuming vehicle.profile has a name field -->
                                </list>
                            </field>
                            <group>
                                <field name="vehicle_count" readonly="1"/>
                            </group>
                        </page>
                        <page string="Services">
                            <field name="available_services" widget="many2many_tags"/>
                        </page>
                        <page string="Linked Entities">
                            <group>
                                <field name="warehouse_id" context="{'form_view_ref': 'stock.warehouse_view_form'}"/>
                                <field name="department_id" context="{'form_view_ref': 'hr.view_department_form'}"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
              
                 <chatter/>
            </form>
        </field>
    </record>

    <!-- Operation Point Tree View -->
    <record id="view_operation_point_tree" model="ir.ui.view">
        <field name="name">operation.point.tree</field>
        <field name="model">operation.point</field>
        <field name="arch" type="xml">
            <list string="Operation Points">
                <field name="name"/>
                <field name="point_type"/>
                <field name="location_id"/>
                <field name="address"/>
                <field name="responsible_employee_id"/>
                <field name="vehicle_count"/>
                <field name="working_hours"/>
                <field name="status"/>
                <field name="location_id" string="Booking Count"/>
            </list>
        </field>
    </record>

    <!-- Operation Point Search View -->
    <record id="view_operation_point_search" model="ir.ui.view">
        <field name="name">operation.point.search</field>
        <field name="model">operation.point</field>
        <field name="arch" type="xml">
            <search string="Operation Points">
                <field name="name"/>
                <field name="responsible_employee_id"/>
                <field name="address"/>
                <filter string="Active" name="active" domain="[('status', '=', 'active')]"/>
                <filter string="Temporary" name="temporary" domain="[('status', '=', 'temporary')]"/>
                <filter string="Closed" name="closed" domain="[('status', '=', 'closed')]"/>
                <group expand="1" string="Group By">
                    <filter name="point_type" string="Point Type" context="{'group_by': 'point_type'}"/>
                    <filter name="status" string="Status" context="{'group_by': 'status'}"/>
                    <filter name="responsible_employee_id" string="Responsible Employee" context="{'group_by': 'responsible_employee_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action for Operation Point -->
    <record id="action_operation_point" model="ir.actions.act_window">
        <field name="name">Operation Points</field>
        <field name="res_model">operation.point</field>
        <field name="view_mode">list,form</field>
        <field name="search_view_id" ref="view_operation_point_search"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Create your first operation point.
            </p>
            <p>
                Manage operation points, assign vehicles, and link services or warehouses.
            </p>
        </field>
    </record>

    <!-- Menu Items -->
    <menuitem id="menu_operation_point_root"
              name="Operation Points"
              sequence="10"/>
    <menuitem id="menu_operation_point"
              name="Points"
              parent="menu_operation_point_root"
              action="action_operation_point"
              sequence="10"/>
</odoo>